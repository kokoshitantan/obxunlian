项目速览
MiniOB 以 build.sh 管理初始化与编译，源码主体在 observer，默认依赖 C++20、CMake ≥3.13、gcc ≥11 或 clang ≥14。
运行时默认从当前工作目录创建 miniob/db 数据目录与 log 日志目录（相对于 build_* 目录）。
环境准备
操作系统：项目仅支持 Linux / macOS；Windows 需借助 WSL2、Docker Desktop 或虚拟机运行 Linux。若继续在原生 Windows 使用 Git，请先执行 git config --global core.autocrlf false，避免脚本换行符问题。
基础工具：cmake、gcc/g++、make、flex (≥2.5)、bison (≥3.7)、python3、git。
建议在 Linux 终端一次性安装：sudo apt update && sudo apt install build-essential cmake flex bison python3 python3-pip git.
第三方依赖：通过 bash [build.sh](http://_vscodecontentref_/3) init 自动拉取并编译 libevent、googletest、benchmark、jsoncpp、replxx。
可设置 THIRD_PARTY_INSTALL_PREFIX=/usr/local 自定义安装路径，但若写入系统目录需 sudo。
Windows 用户推荐：
开启 BIOS 虚拟化 → 安装 WSL2 或 Docker Desktop。
使用 docker run -d --name miniob --privileged -v %cd%/miniob:/root/miniob oceanbase/miniob 复用宿主代码（WSL PowerShell 中 %cd% 换成 $PWD）。
VS Code 可通过 Remote-WSL / Dev Containers 无缝开发。
编译与运行
初始化三方库（首次执行）
bash [build.sh](http://_vscodecontentref_/4) init
编译调试版
bash build.sh（等同 bash [build.sh](http://_vscodecontentref_/5) debug）。Release 版用 bash [build.sh](http://_vscodecontentref_/6) release。
常见可选项：
bash [build.sh](http://_vscodecontentref_/7) -DCONCURRENCY=ON 打开并发支持。
bash [build.sh](http://_vscodecontentref_/8) --make -j$(nproc) 控制 make 并行度。
运行服务端（在 build_debug 目录）
单进程 CLI：./bin/observer -f [observer.ini](http://_vscodecontentref_/9) -P cli
TCP + 自带客户端：./bin/observer -f [observer.ini](http://_vscodecontentref_/10) -p 6789，再执行 ./bin/obclient -p 6789
Unix Socket：./bin/observer -f [observer.ini](http://_vscodecontentref_/11) -s miniob.sock
如需 MySQL-兼容客户端，加 -P mysql 并使用 mysql -h127.0.0.1 -P6789 连接。
目录 & 日志
首次运行前请在 build_debug 目录创建 log，以免重定向失败。数据默认写入 build_debug/miniob/db，如需清理或重建可直接删除该目录。
动态库搜索
若提示找不到 libevent 等库，执行 export LD_LIBRARY_PATH=/usr/local/lib64:$LD_LIBRARY_PATH（写入 ~/.bashrc 持久化）。
配置要点
默认配置文件 observer.ini 目前仅控制日志：LOG_FILE_NAME、LOG_FILE_LEVEL、LOG_CONSOLE_LEVEL、DefaultLogModules。可直接编辑或运行时用 -f 指定其他文件。
其余核心参数通过命令行切换：
-p 端口 / -s Unix Socket
-P 协议（plain/mysql/cli）
-t 事务模式（vacuous/mvcc，开启 MVCC 前需 -DCONCURRENCY=ON）
-T 线程模型（独占线程或线程池）
-n Buffer Pool 大小（字节）
-d disk 切换持久化
-E lsm 选择 LSM 引擎实验分支
源码默认在 DefaultHandler 中以相对路径 miniob/db 保存数据库，若想改变基目录，可后续扩展配置或在启动脚本中改工作目录。
验证与测试
自带 Python 冒烟框架位于 miniob_test.py，首次可以先跑报告模式：
python3 miniob_test.py --test-cases=basic --report-only
如果补齐 result 文件，去掉 --report-only 可进行差异比对。
单元测试和 Benchmark 在 CMake 中通过 WITH_UNIT_TESTS、WITH_BENCHMARK 控制，默认启用单测目标（源码在 unittest，二进制进 build_debug/unittest）。
质量检查
Build：未执行（信息收集任务，未在当前环境运行编译）
Lint/Type：未执行
Unit Tests：未执行
Smoke Run：未执行
Requirements Coverage
环境配置指引：已提供
项目浏览建议：已整理
后续建议：已列出
建议的后续工作
在选择的 Linux 环境里实际执行 bash [build.sh](http://_vscodecontentref_/17) init && bash build.sh 验证依赖是否满足；若在中国大陆，可提前配置代理或镜像源。
根据常用模式（CLI/TCP/MySQL）准备启动脚本，并将 log / miniob/db 两个目录纳入 .gitignore，避免误提交。
为 VS Code 创建 tasks.json 与 launch.json（文档已有示例）以加速调试。
若计划长期开发，建议补充一个 docs/SETUP.md 或 README 中文节摘录上述关键步骤，方便团队成员快速上手。
如还想深入某个模块或需要我做自动化脚本配置，随时告


wsl
cd /mnt/c/Users/852/Desktop/miniob/obxunlian
sudo apt update && sudo apt install build-essential cmake flex bison python3 python3-pip git
sudo apt update && sudo apt install dos2unix
dos2unix build.sh
bash build.sh init
bash build.sh